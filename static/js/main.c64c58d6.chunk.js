(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(n,e,t){},45:function(n,e,t){},77:function(n,e,t){},78:function(n,e,t){},79:function(n,e,t){},80:function(n,e,t){},81:function(n,e,t){"use strict";t.r(e);var o=t(0),c=t(1),i=t.n(c),a=t(38),r=t.n(a),s=(t(45),t(23),t(6)),l=t(10),u={clientRole:null,inviteCode:""},j=c.createContext([u,function(){}]),f=function(n){var e=n.children,t=c.useState(u),i=j.Provider;return Object(o.jsx)(i,{value:t,children:e})},d=function(){var n=c.useContext(j),e=Object(s.a)(n,2),t=e[0],o=e[1];return{state:t,joinAsHost:function(n){return o((function(e){return Object(l.a)(Object(l.a)({},e),{},{clientRole:"host",inviteCode:n})}))},joinAsGuest:function(){return o((function(n){return Object(l.a)(Object(l.a)({},n),{},{clientRole:"guest"})}))},leaveGame:function(){o(u)}}},v=t(39);console.log("https://whispering-bayou-18693.herokuapp.com/");var h=Object(v.io)("https://whispering-bayou-18693.herokuapp.com/");h.on("connect",(function(){console.log("client connected")}));var b=function(){return{socket:h}},x=(t(77),function(n){var e=n.children,t=n.onclick;return Object(o.jsx)("button",{className:"button",onClick:function(n){n.stopPropagation(),t()},children:e})}),m=(t(78),function(){var n=i.a.useRef(null),e=Object(c.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(c.useState)({x:0,y:0}),u=Object(s.a)(l,2),j=u[0],f=u[1],v=b().socket,h=d().leaveGame,m=function(n,e,t){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke()};v.on("drawing",(function(e){console.log(e);var t=n.current;t&&m(t,e.lineStart,e.lineEnd)})),Object(c.useEffect)((function(){var e=n.current;e&&(e.lineWidth=3,e.lineJoin="round",e.lineCap="round",e.strokeStyle="#00CC99")}),[]);var O=function(){var e=n.current;e&&e.clearRect(0,0,900,450)};v.on("clearCanvas",(function(){O()})),v.on("hostLeft",(function(){alert("The host left"),h()}));return Object(o.jsxs)("div",{className:"canvas",children:[Object(o.jsx)("canvas",{width:"".concat(900,"px"),height:"".concat(450,"px"),onMouseMove:function(e){if(a&&n.current){var t={x:j.x,y:j.y},o={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};m(n.current,t,o),c=t,i=o,v.emit("drawing",{lineStart:c,lineEnd:i}),f({x:o.x,y:o.y})}var c,i},onMouseDown:function(n){f({x:n.nativeEvent.offsetX,y:n.nativeEvent.offsetY}),r(!0)},onMouseUp:function(){r(!1)},ref:function(e){e&&(n.current=e.getContext("2d"))},className:"canvas"}),Object(o.jsxs)("div",{className:"canvas-buttons",children:[Object(o.jsx)(x,{onclick:function(){O(),v.emit("clearCanvas")},children:"Clear"}),Object(o.jsx)(x,{onclick:function(){v.emit("leaveGame"),h()},children:"Exit"})]})]})}),O="123456789abcdefghijklmnopqrstuvwxyz",g=function(){var n=Math.floor(Math.random()*O.length);return O[n]},p=(t(79),function(n){var e=n.children;return Object(o.jsx)("div",{className:"modal",children:e})}),k=(t(80),function(n){var e=n.show,t=b().socket,i=d(),a=i.joinAsHost,r=i.joinAsGuest,l=Object(c.useState)(!1),u=Object(s.a)(l,2),j=u[0],f=u[1],v=Object(c.useState)(""),h=Object(s.a)(v,2),m=h[0],O=h[1];return t.on("confirmGameCreated",(function(n){console.log("room created"),a(n)})),t.on("confirmGameJoined",(function(){console.log("room joined"),f(!1),r()})),t.on("gameNotFound",(function(){console.log("room joined"),f(!0)})),e?Object(o.jsx)(p,{children:Object(o.jsxs)("div",{className:"new-game",children:[Object(o.jsx)(x,{onclick:function(){var n=new Array(9).fill(null).map((function(n,e,t){var o=e+1,c=o!==t.length&&o%3===0;return"".concat(g()).concat(c?"-":"")})).join("");t.emit("createRoom",n),console.log("start clicked")},children:"Start new game"}),"Join existing game",j&&Object(o.jsx)("span",{style:{color:"red"},children:"Room not Found"}),Object(o.jsx)("input",{onChange:function(n){O(n.target.value)},type:"text",placeholder:"paste invite code..."}),Object(o.jsx)(x,{onclick:function(){console.log("join clicked"),t.emit("joinGame",m)},children:"Join existing game"})]})}):null});var C=function(){var n=d().state,e=n.clientRole,t=n.inviteCode;return console.log(e),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("h3",{children:" Draw stuff... :)"}),t&&Object(o.jsxs)("h4",{children:[" Invite code: ",t]}),Object(o.jsx)(m,{}),Object(o.jsx)(k,{show:null===e})]})},y=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,82)).then((function(e){var t=e.getCLS,o=e.getFID,c=e.getFCP,i=e.getLCP,a=e.getTTFB;t(n),o(n),c(n),i(n),a(n)}))};r.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(f,{children:Object(o.jsx)(C,{})})}),document.getElementById("root")),y()}},[[81,1,2]]]);
//# sourceMappingURL=main.c64c58d6.chunk.js.map